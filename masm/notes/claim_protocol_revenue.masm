use.miden_name::naming
use.miden::active_note
use.std::sys

const.TOKEN=0
const.NOTE_DETAILS=4
const.RECIPIENT=8

begin
    push.0
    exec.active_note::get_inputs drop drop

    mem_loadw_be.RECIPIENT padw mem_loadw_be.NOTE_DETAILS padw mem_loadw_be.TOKEN
    # [TOKEN, DETAILS, RECIPIENT]
    call.naming::claim_protocol_revenue
    exec.sys::truncate_stack
end